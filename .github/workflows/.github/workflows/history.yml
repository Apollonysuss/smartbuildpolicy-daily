name: æ‰‹åŠ¨æŒ–æ˜å†å²

on:
  workflow_dispatch: # ğŸ‘ˆ è¿™ä¸ªé…ç½®ä¿è¯äº†å®ƒç»ä¸è‡ªåŠ¨è¿è¡Œï¼Œå¿…é¡»æ‰‹åŠ¨ç‚¹

permissions:
  contents: write

jobs:
  digging:
    runs-on: ubuntu-latest
    
    steps:
    - name: æ£€å‡ºä»£ç 
      uses: actions/checkout@v2
      
    - name: å®‰è£…ç¯å¢ƒ
      run: pip install requests
      
    - name: å¼€å§‹æŒ–æ˜
      env:
        # è¿™é‡Œç›´æ¥è¯»å–ä½ åœ¨ç½‘é¡µè®¾ç½®é‡Œå¡«çš„ Key
        DEEPSEEK_API_KEY: ${{ secrets.DEEPSEEK_API_KEY }}
      run: python get_history.py
      
    - name: ä¿å­˜ç»“æœ
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git add data.json
        git commit -m "Update history" || echo "æ— æ–°å†…å®¹"
        git push
